<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
    <head prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#">
    <meta charset="UTF-8" />

    <meta name="generator" content="Hugo 0.68.3" /><meta name="theme-color" content="#fff" />
        <script>
            const userPrefers = localStorage.getItem('theme');
            const darkModeMediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
            const lightModeMediaQuery = window.matchMedia('(prefers-color-scheme: light)');
            if (userPrefers === 'dark') {
                changeModeMeta('dark');
            } else if (userPrefers === 'light') {
                changeModeMeta('light');
            } else if (darkModeMediaQuery.matches) {
                changeModeMeta('dark');
            } else if (lightModeMediaQuery.matches) {
                changeModeMeta('light');
            }
            function changeModeMeta(theme) {
                document.documentElement.setAttribute('data-theme', theme);
                if (theme === 'dark') {
                    changeThemeColor('#16171d');
                } else {
                    changeThemeColor('#fff');
                }
            }
            function changeThemeColor(themeColor) {
                document.querySelector('meta[name="theme-color"]').setAttribute('content', themeColor);
            }
        </script>

    
        
        
        <script>
            if (window.location.host == "chenbokaix250.github.io" && window.location.protocol != "https:") {
                window.location.protocol = "https";
            }
        </script>

    
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <meta name="format-detection" content="telephone=no, date=no, address=no, email=no" />
    
    <meta http-equiv="Cache-Control" content="no-transform" />
    
    <meta http-equiv="Cache-Control" content="no-siteapp" />

    <title>Tensorflowä¹‹ | æä¹ä¸–ç•Œ</title>

    <link rel="stylesheet" href="../../css/meme.min.afda148d4cf017576d3eec6d200c3aac83901f63ecc3adb64d85550ec2733334.css" integrity="sha256-r9oUjUzwF1dtPuxtIAw6rIOQH2Psw622TYVVDsJzMzQ=" />

    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto&#43;Serif&#43;SC:wght@400;500;700&amp;family=Source&#43;Code&#43;Pro:ital,wght@0,400;0,700;1,400;1,700&amp;family=Cinzel&#43;Decorative:wght@700&amp;display=swap" media="print" onload="this.media='all'" />
        <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto&#43;Serif&#43;SC:wght@400;500;700&amp;family=Source&#43;Code&#43;Pro:ital,wght@0,400;0,700;1,400;1,700&amp;family=Cinzel&#43;Decorative:wght@700&amp;display=swap" /></noscript>

    <meta name="author" content="chenbokai" />
    
    
    <meta name="description" content="TensorFlowä¹‹estimatorè¯¦è§£ Estimatoråˆè¯† æ¡†æ¶ç»“æ„ åœ¨ä»‹ç»Esâ€¦â€¦" />

    <link rel="shortcut icon" href="../../favicon.ico" type="image/x-icon" />
    <link rel="mask-icon" href="../../icons/safari-pinned-tab.svg" color="#2a6df4" />
    <link rel="apple-touch-icon" sizes="180x180" href="../../icons/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-title" content="æä¹ä¸–ç•Œ" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="application-name" content="æä¹ä¸–ç•Œ" />
    <meta name="msapplication-starturl" content="../../" />
    <meta name="msapplication-TileColor" content="#fff" />
    <meta name="msapplication-TileImage" content="../../icons/mstile-150x150.png" />
    <link rel="manifest" href="../../manifest.json" />

    
    

    
    <link rel="canonical" href="https://chenbokaix250.github.io/tech/tensorflow%E4%B9%8Bestimator/" />



<script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "datePublished": "2020-04-11T09:08:56+08:00",
        "dateModified": "2020-04-11T17:04:36+08:00",
        "url": "https://chenbokaix250.github.io/tech/tensorflow%E4%B9%8Bestimator/",
        "headline": "Tensorflowä¹‹",
        "description": "TensorFlowä¹‹estimatorè¯¦è§£ Estimatoråˆè¯† æ¡†æ¶ç»“æ„ åœ¨ä»‹ç»Esâ€¦â€¦",
        "inLanguage" : "zh-CN",
        "articleSection": "tech",
        "wordCount":  3512 ,
        "image": ["https://pic3.zhimg.com/v2-fcc70547f247f5e3e70b1a5f09bb0612_r.jpg","https://pic1.zhimg.com/v2-bd6b0d403c84584126c3009307dbcd44_r.jpg"],
        "author": {
            "@type": "Person",
            "description": "Viva La Vida",
            "email": "chenbokais3@gmail.com",
            "image": "https://chenbokaix250.github.io/icons/apple-touch-icon.png",
            "url": "https://chenbokai.run",
            "name": "chenbokai"
        },
        "license": "[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)",
        "publisher": {
            "@type": "Organization",
            "name": "æä¹ä¸–ç•Œ",
            "logo": {
                "@type": "ImageObject",
                "url": "https://chenbokaix250.github.io/icons/apple-touch-icon.png"
            },
            "url": "https://chenbokaix250.github.io/"
        },
        "mainEntityOfPage": {
            "@type": "WebSite",
            "@id": "https://chenbokaix250.github.io/"
        }
    }
</script>

    



<meta name="twitter:card" content="summary_large_image" />


<meta name="twitter:site" content="@chenbokaiy450" />
<meta name="twitter:creator" content="@chenbokaiy450" />

    





<meta property="og:title" content="Tensorflowä¹‹" />
<meta property="og:description" content="TensorFlowä¹‹estimatorè¯¦è§£ Estimatoråˆè¯† æ¡†æ¶ç»“æ„ åœ¨ä»‹ç»Esâ€¦â€¦" />
<meta property="og:url" content="https://chenbokaix250.github.io/tech/tensorflow%E4%B9%8Bestimator/" />
<meta property="og:site_name" content="æä¹ä¸–ç•Œ" />
<meta property="og:locale" content="zh" /><meta property="og:image" content="https://pic3.zhimg.com/v2-fcc70547f247f5e3e70b1a5f09bb0612_r.jpg" />
<meta property="og:type" content="article" />
    <meta property="article:published_time" content="2020-04-11T09:08:56+08:00" />
    <meta property="article:modified_time" content="2020-04-11T17:04:36+08:00" />
    
    <meta property="article:section" content="tech" />


        <link rel="preconnect" href="https://www.google-analytics.com" crossorigin />

        


    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-100434861-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-100434861-1');
    </script>




    
</head>

    <body>
        <div class="container">
            
    <header class="header" data-scroll-header>
        
            <div class="header-wrapper">
                <div class="header-inner">
                    
    <div class="site-brand">
        
            <a href="../../" class="brand">æä¹ä¸–ç•Œ</a>
        
    </div>

                    <nav class="nav">
    <ul class="menu" id="menu">
        
            
        
        
        
        
            
                <li class="menu-item"><a href="../../life/"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon life"><path d="M301.1 212c4.4 4.4 4.4 11.9 0 16.3l-9.7 9.7c-4.4 4.7-11.9 4.7-16.6 0l-10.5-10.5c-4.4-4.7-4.4-11.9 0-16.6l9.7-9.7c4.4-4.4 11.9-4.4 16.6 0l10.5 10.8zm-30.2-19.7c3-3 3-7.8 0-10.5-2.8-3-7.5-3-10.5 0-2.8 2.8-2.8 7.5 0 10.5 3.1 2.8 7.8 2.8 10.5 0zm-26 5.3c-3 2.8-3 7.5 0 10.2 2.8 3 7.5 3 10.5 0 2.8-2.8 2.8-7.5 0-10.2-3-3-7.7-3-10.5 0zm72.5-13.3c-19.9-14.4-33.8-43.2-11.9-68.1 21.6-24.9 40.7-17.2 59.8.8 11.9 11.3 29.3 24.9 17.2 48.2-12.5 23.5-45.1 33.2-65.1 19.1zm47.7-44.5c-8.9-10-23.3 6.9-15.5 16.1 7.4 9 32.1 2.4 15.5-16.1zM504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-66.2 42.6c2.5-16.1-20.2-16.6-25.2-25.7-13.6-24.1-27.7-36.8-54.5-30.4 11.6-8 23.5-6.1 23.5-6.1.3-6.4 0-13-9.4-24.9 3.9-12.5.3-22.4.3-22.4 15.5-8.6 26.8-24.4 29.1-43.2 3.6-31-18.8-59.2-49.8-62.8-22.1-2.5-43.7 7.7-54.3 25.7-23.2 40.1 1.4 70.9 22.4 81.4-14.4-1.4-34.3-11.9-40.1-34.3-6.6-25.7 2.8-49.8 8.9-61.4 0 0-4.4-5.8-8-8.9 0 0-13.8 0-24.6 5.3 11.9-15.2 25.2-14.4 25.2-14.4 0-6.4-.6-14.9-3.6-21.6-5.4-11-23.8-12.9-31.7 2.8.1-.2.3-.4.4-.5-5 11.9-1.1 55.9 16.9 87.2-2.5 1.4-9.1 6.1-13 10-21.6 9.7-56.2 60.3-56.2 60.3-28.2 10.8-77.2 50.9-70.6 79.7.3 3 1.4 5.5 3 7.5-2.8 2.2-5.5 5-8.3 8.3-11.9 13.8-5.3 35.2 17.7 24.4 15.8-7.2 29.6-20.2 36.3-30.4 0 0-5.5-5-16.3-4.4 27.7-6.6 34.3-9.4 46.2-9.1 8 3.9 8-34.3 8-34.3 0-14.7-2.2-31-11.1-41.5 12.5 12.2 29.1 32.7 28 60.6-.8 18.3-15.2 23-15.2 23-9.1 16.6-43.2 65.9-30.4 106 0 0-9.7-14.9-10.2-22.1-17.4 19.4-46.5 52.3-24.6 64.5 26.6 14.7 108.8-88.6 126.2-142.3 34.6-20.8 55.4-47.3 63.9-65 22 43.5 95.3 94.5 101.1 59z"/></svg><span class="menu-item-name">ç”Ÿæ´»</span></a>
                </li>
            
        
            
                <li class="menu-item"><a href="../../tech/"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon tech"><path d="M512 256c0 141.2-114.7 256-256 256C114.8 512 0 397.3 0 256S114.7 0 256 0s256 114.7 256 256zm-32 0c0-123.2-100.3-224-224-224C132.5 32 32 132.5 32 256s100.5 224 224 224 224-100.5 224-224zM160.9 124.6l86.9 37.1-37.1 86.9-86.9-37.1 37.1-86.9zm110 169.1l46.6 94h-14.6l-50-100-48.9 100h-14l51.1-106.9-22.3-9.4 6-14 68.6 29.1-6 14.3-16.5-7.1zm-11.8-116.3l68.6 29.4-29.4 68.3L230 246l29.1-68.6zm80.3 42.9l54.6 23.1-23.4 54.3-54.3-23.1 23.1-54.3z"/></svg><span class="menu-item-name">æŠ€æœ¯</span></a>
                </li>
            
        
            
                <li class="menu-item"><a href="../../about/"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" class="icon about"><path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"/></svg><span class="menu-item-name">å…³äº</span></a>
                </li>
            
        
            
                
                    <li class="menu-item">
                        
    
        
            
        
        <div id="theme-switcher">ğŸŒ</div>
    


                    </li>
                
            
        
            
                
                    
                        <li class="menu-item">
                            <div id="lang-switcher" data-hide="true">
        ğŸ‡¨ğŸ‡³
        
            
        
    </div>


                        </li>
                    
                
            
        
    </ul>
</nav>

                </div>
            </div>
            
    <input type="checkbox" id="nav-toggle" aria-hidden="true" />
    <label for="nav-toggle" class="nav-toggle"></label>
    <label for="nav-toggle" class="nav-curtain"></label>


        
    </header>




            
            
    <main class="main single" id="main">
    <div class="main-inner">

        <article class="content post" data-align="justify" data-type="tech" data-toc-num="true">

            <h1 class="post-title">Tensorflowä¹‹</h1>

            

            
                
            

            

            <div class="post-body">

<h1 id="tensorflowä¹‹estimatorè¯¦è§£"><a href="#tensorflowä¹‹estimatorè¯¦è§£" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>TensorFlowä¹‹estimatorè¯¦è§£</h1>

<h2 id="estimatoråˆè¯†"><a href="#estimatoråˆè¯†" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Estimatoråˆè¯†</h2>

<h3 id="æ¡†æ¶ç»“æ„"><a href="#æ¡†æ¶ç»“æ„" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>æ¡†æ¶ç»“æ„</h3>

<p style="text-indent:0"><span class="drop-cap">åœ¨</span>ä»‹ç»Estimatorä¹‹å‰éœ€è¦å¯¹å®ƒåœ¨TensorFlowè¿™ä¸ªå¤§æ¡†æ¶çš„å®šä½æœ‰ä¸ªå¤§è‡´çš„è®¤è¯†ï¼Œå¦‚ä¸‹å›¾ç¤ºï¼š
<img src="https://pic3.zhimg.com/v2-fcc70547f247f5e3e70b1a5f09bb0612_r.jpg" alt="" /></p>

<p>å¯ä»¥çœ‹åˆ°Estimatoræ˜¯å±äºHigh levelçš„APIï¼Œè€ŒMid-level APIåˆ†åˆ«æ˜¯ï¼š</p>

<ul>
<li>Layersï¼šç”¨æ¥æ„å»ºç½‘ç»œç»“æ„</li>
<li>Datasets: ç”¨æ¥æ„å»ºæ•°æ®è¯»å–pipeline</li>
<li>Metricsï¼šç”¨æ¥è¯„ä¼°ç½‘ç»œæ€§èƒ½</li>
</ul>

<p>å¯ä»¥çœ‹åˆ°å¦‚æœä½¿ç”¨Estimatorï¼Œæˆ‘ä»¬åªéœ€è¦å…³æ³¨è¿™ä¸‰ä¸ªéƒ¨åˆ†å³å¯ï¼Œè€Œä¸ç”¨å†å…³å¿ƒä¸€äº›å¤ªç»†èŠ‚çš„ä¸œè¥¿ï¼Œå¦å¤–ä¹Ÿä¸ç”¨å†ä½¿ç”¨çƒ¦äººçš„Sessionäº†ã€‚</p>

<h2 id="estimatorä½¿ç”¨æ­¥éª¤"><a href="#estimatorä½¿ç”¨æ­¥éª¤" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Estimatorä½¿ç”¨æ­¥éª¤</h2>

<ul>
<li>åˆ›å»ºä¸€ä¸ªæˆ–å¤šä¸ªè¾“å…¥å‡½æ•°ï¼Œå³input_fn</li>
<li>å®šä¹‰æ¨¡å‹çš„ç‰¹å¾åˆ—,å³feature_columns</li>
<li>å®ä¾‹åŒ– Estimatorï¼ŒæŒ‡å®šç‰¹å¾åˆ—å’Œå„ç§è¶…å‚æ•°ã€‚</li>
<li>åœ¨ Estimator å¯¹è±¡ä¸Šè°ƒç”¨ä¸€ä¸ªæˆ–å¤šä¸ªæ–¹æ³•ï¼Œä¼ é€’é€‚å½“çš„è¾“å…¥å‡½æ•°ä½œä¸ºæ•°æ®çš„æ¥æºã€‚ï¼ˆtrain, evaluate, predictï¼‰</li>
</ul>

<p><img src="https://pic1.zhimg.com/v2-bd6b0d403c84584126c3009307dbcd44_r.jpg" alt="" /></p>

<p>é€šè¿‡ä¼ªä»£ç çš„å½¢å¼ä»‹ç»å¦‚ä½•ä½¿ç”¨Estimatorï¼š</p>

<ul>
<li><p>åˆ›å»ºä¸€ä¸ªæˆ–å¤šä¸ªè¾“å…¥å‡½æ•°ï¼Œå³input_fnï¼š</p>
<pre><code>def train_input_fn(features, labels, batch_size):
&#34;&#34;&#34;An input function for training&#34;&#34;&#34;
# Convert the inputs to a Dataset.
dataset = tf.data.Dataset.from_tensor_slices((dict(features), labels))

# Shuffle, repeat, and batch the examples.
return dataset.shuffle(1000).repeat().batch(batch_size)</code></pre></li>
</ul>

<p>featureséœ€è¦æ˜¯å­—å…¸ (å¦å¤–æ­¤å¤„çš„featureä¸æˆ‘ä»¬å¸¸è¯´çš„æå–ç‰¹å¾çš„featureè¿˜ä¸å¤ªä¸€æ ·ï¼Œä¹Ÿå¯ä»¥æŒ‡åŸå›¾æ•°æ®(raw image),æˆ–è€…å…¶ä»–æœªä½œå¤„ç†çš„æ•°æ®)ã€‚ä¸‹é¢å®šä¹‰çš„my_feature_columnä¼šä¼ ç»™Estimatorç”¨äºè§£æfeaturesã€‚</p>

<ul>
<li><p>å®šä¹‰æ¨¡å‹çš„ç‰¹å¾åˆ—,å³feature_columns</p>
<pre><code># Feature columns describe how to use the input.
my_feature_columns = []
for key in train_x.keys():          
my_feature_columns.append(tf.feature_column.numeric_column(key=key))</code></pre></li>

<li><p>å®ä¾‹åŒ–estimator,æŒ‡å®šç‰¹å¾åˆ—å’Œå„ç§è¶…å‚æ•°</p>
<pre><code># Build a DNN with 2 hidden layers and 10 nodes in each hidden layer.
classifier = tf.estimator.DNNClassifier(
feature_columns=my_feature_columns,
# Two hidden layers of 10 nodes each.
hidden_units=[10, 10],
# The model must choose between 3 classes.
n_classes=3)</code></pre></li>
</ul>

<p>æ³¨æ„åœ¨å®ä¾‹åŒ–Estimatorçš„æ—¶å€™ä¸ç”¨æŠŠæ•°æ®ä¼ è¿›æ¥ï¼Œä½ åªéœ€è¦æŠŠfeature_columnsä¼ è¿›æ¥å³å¯ï¼Œå‘Šè¯‰Estimatoréœ€è¦è§£æå“ªäº›ç‰¹å¾å€¼ï¼Œè€Œæ•°æ®é›†éœ€è¦åœ¨è®­ç»ƒå’Œè¯„ä¼°æ¨¡å‹çš„æ—¶å€™æ‰ä¼ ã€‚</p>

<ul>
<li>åœ¨ Estimator å¯¹è±¡ä¸Šè°ƒç”¨ä¸€ä¸ªæˆ–å¤šä¸ªæ–¹æ³•ï¼Œä¼ é€’é€‚å½“çš„è¾“å…¥å‡½æ•°ä½œä¸ºæ•°æ®çš„æ¥æº</li>

<li><p>train(è®­ç»ƒ)</p>
<pre><code>#Train the Model.
classifier.train(     input_fn=lambda:iris_data.train_input_fn(train_x, train_y, args.batch_size),     steps=args.train_steps) </code></pre></li>

<li><p>evaluate(è¯„ä¼°)</p>
<pre><code># Evaluate the model.
eval_result = classifier.evaluate(     input_fn=lambda:iris_data.eval_input_fn(test_x, test_y, args.batch_size))
print(&#39;\nTest set accuracy: {accuracy:0.3f}\n&#39;.format(**eval_result)) </code></pre></li>

<li><p>predict(é¢„æµ‹)</p>
<pre><code>#Generate predictions from the model
expected = [&#39;Setosa&#39;, &#39;Versicolor&#39;, &#39;Virginica&#39;] 
predict_x = {     
&#39;SepalLength&#39;: [5.1, 5.9, 6.9],     
&#39;SepalWidth&#39;: [3.3, 3.0, 3.1],    
&#39;PetalLength&#39;: [1.7, 4.2, 5.4],     
&#39;PetalWidth&#39;: [0.5, 1.5, 2.1], 
}
predictions = classifier.predict( input_fn=lambda:iris_data.eval_input_fn(predict_x,batch_size=args.batch_size)) </code></pre></li>
</ul>

<h2 id="æ·±å…¥ç†è§£estimator"><a href="#æ·±å…¥ç†è§£estimator" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>æ·±å…¥ç†è§£Estimator</h2>

<p>ä¸Šé¢çš„ç¤ºä¾‹ä¸­ç®€å•åœ°ä»‹ç»äº†Estimatorï¼Œç½‘ç»œä½¿ç”¨çš„æ˜¯é¢„åˆ›å»ºå¥½çš„DNNClassifier,å…¶ä»–é¢„åˆ›å»ºç½‘ç»œç»“æ„æœ‰å¦‚ä¸‹ï¼š</p>

<p>!()[<a href="https://pic1.zhimg.com/v2-c016e1bc5c64eef1df8832beb25a3a24_r.jpg" target="_blank" rel="noopener">https://pic1.zhimg.com/v2-c016e1bc5c64eef1df8832beb25a3a24_r.jpg</a>]</p>

<h2 id="ä»æºç ç†è§£estimator"><a href="#ä»æºç ç†è§£estimator" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>ä»æºç ç†è§£Estimator</h2>

<p>Estimatorçš„<a href="https://github.com/tensorflow/estimator/blob/master/tensorflow_estimator/python/estimator/estimator.py" target="_blank" rel="noopener">æºä»£ç </a>å¦‚ä¸‹ï¼ˆä¸ºæ–¹ä¾¿è¯´æ˜ï¼Œå·²ç»æå¤´å»å°¾ï¼‰ï¼š</p>
<pre><code>class Estimator(object):
  def __init__(self, model_fn, model_dir=None, config=None, params=None, warm_start_from=None):
  ...</code></pre>
<p>å¯ä»¥çœ‹åˆ°éœ€è¦ä¼ å…¥çš„å‚æ•°å¦‚ä¸‹ï¼š</p>

<ul>
<li><p>model_dir: æŒ‡å®šcheckpointså’Œå…¶ä»–æ—¥å¿—å­˜æ”¾çš„è·¯å¾„ã€‚</p></li>

<li><p>model_fn: è¿™ä¸ªæ˜¯éœ€è¦æˆ‘ä»¬è‡ªå®šä¹‰çš„ç½‘ç»œæ¨¡å‹å‡½æ•°ï¼Œåé¢è¯¦ç»†ä»‹ç»</p></li>

<li><p>config: ç”¨äºæ§åˆ¶å†…éƒ¨å’Œcheckpointsç­‰ï¼Œå¦‚æœmodel_fnå‡½æ•°ä¹Ÿå®šä¹‰configè¿™ä¸ªå˜é‡ï¼Œåˆ™ä¼šå°†configä¼ ç»™model_fn</p></li>

<li><p>params: è¯¥å‚æ•°çš„å€¼ä¼šä¼ é€’ç»™model_fnã€‚</p></li>

<li><p>warm_start_from: æŒ‡å®šcheckpointè·¯å¾„ï¼Œä¼šå¯¼å…¥è¯¥checkpointå¼€å§‹è®­ç»ƒ</p></li>
</ul>

<h2 id="æ„å»ºmodel-fn"><a href="#æ„å»ºmodel-fn" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>æ„å»ºmodel_fn</h2>

<p>æ¨¡å‹å‡½æ•°ä¸€èˆ¬å®šä¹‰å¦‚ä¸‹:</p>
<pre><code>def my_model_fn(
   features,    # This is batch_features from input_fn,`Tensor` or dict of `Tensor` (depends on data passed to `fit`).
   labels,     # This is batch_labels from input_fn
   mode,      # An instance of tf.estimator.ModeKeys
   params,      # Additional configuration
   config=None
   ):</code></pre>
<ul>
<li>å‰ä¸¤ä¸ªå‚æ•°æ˜¯ä»è¾“å…¥å‡½æ•°ä¸­è¿”å›çš„ç‰¹å¾å’Œæ ‡ç­¾æ‰¹æ¬¡ï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œfeatures å’Œ labels æ˜¯æ¨¡å‹å°†ä½¿ç”¨çš„æ•°æ®ã€‚</li>
<li>params æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œå®ƒå¯ä»¥ä¼ å…¥è®¸å¤šå‚æ•°ç”¨æ¥æ„å»ºç½‘ç»œæˆ–è€…å®šä¹‰è®­ç»ƒæ–¹å¼ç­‰ã€‚ä¾‹å¦‚é€šè¿‡è®¾ç½®params[&lsquo;n_classes&rsquo;]æ¥å®šä¹‰æœ€ç»ˆè¾“å‡ºèŠ‚ç‚¹çš„ä¸ªæ•°ç­‰ã€‚</li>
<li>config é€šå¸¸ç”¨æ¥æ§åˆ¶checkpointæˆ–è€…åˆ†å¸ƒå¼ä»€ä¹ˆï¼Œè¿™é‡Œä¸æ·±å…¥ç ”ç©¶ã€‚</li>
<li>mode å‚æ•°è¡¨ç¤ºè°ƒç”¨ç¨‹åºæ˜¯è¯·æ±‚è®­ç»ƒã€è¯„ä¼°è¿˜æ˜¯é¢„æµ‹ï¼Œåˆ†åˆ«é€šè¿‡<code>tf.estimator.ModeKeys.TRAIN / EVAL / PREDICT</code>æ¥å®šä¹‰ã€‚å¦å¤–é€šè¿‡è§‚å¯ŸDNNClassifierçš„æºä»£ç å¯ä»¥çœ‹åˆ°ï¼Œmodeè¿™ä¸ªå‚æ•°å¹¶ä¸ç”¨æ‰‹åŠ¨ä¼ å…¥ï¼Œå› ä¸ºEstimatorä¼šè‡ªåŠ¨è°ƒæ•´ã€‚ä¾‹å¦‚å½“ä½ è°ƒç”¨estimator.train(&hellip;)çš„æ—¶å€™ï¼Œmodeåˆ™ä¼šè¢«èµ‹å€¼tf.estimator.ModeKeys.TRAINã€‚</li>
</ul>

<p>model_fnéœ€è¦å¯¹äºä¸åŒçš„æ¨¡å¼æä¾›ä¸åŒçš„å¤„ç†æ–¹å¼ï¼Œå¹¶ä¸”éƒ½éœ€è¦è¿”å›ä¸€ä¸ª<code>tf.estimator.EstimatorSpec</code>çš„å®ä¾‹ã€‚</p>

<p>å¤§ç™½è¯ç‰ˆæœ¬å°±æ˜¯ï¼šæ¨¡å‹æœ‰è®­ç»ƒï¼ŒéªŒè¯å’Œæµ‹è¯•ä¸‰ç§é˜¶æ®µï¼Œè€Œä¸”å¯¹äºä¸åŒæ¨¡å¼ï¼Œå¯¹æ•°æ®æœ‰ä¸åŒçš„å¤„ç†æ–¹å¼ã€‚ä¾‹å¦‚åœ¨è®­ç»ƒé˜¶æ®µï¼Œæˆ‘ä»¬éœ€è¦å°†æ•°æ®å–‚ç»™æ¨¡å‹ï¼Œæ¨¡å‹åŸºäºè¾“å…¥æ•°æ®ç»™å‡ºé¢„æµ‹å€¼ï¼Œç„¶åæˆ‘ä»¬åœ¨é€šè¿‡é¢„æµ‹å€¼å’ŒçœŸå®å€¼è®¡ç®—å‡ºlossï¼Œæœ€åç”¨lossæ›´æ–°ç½‘ç»œå‚æ•°ï¼Œè€Œåœ¨è¯„ä¼°é˜¶æ®µï¼Œæˆ‘ä»¬åˆ™ä¸éœ€è¦åå‘ä¼ æ’­æ›´æ–°ç½‘ç»œå‚æ•°ï¼Œæ¢å¥è¯è¯´ï¼Œmdoel_fnéœ€è¦å¯¹ä¸‰ç§æ¨¡å¼è®¾ç½®ä¸‰å¥—ä»£ç ã€‚</p>

<p>Estimatorè§„å®šmodel_fnéœ€è¦è¿”<code>tf.estimator.EstimatorSpec</code>ï¼Œè¿™æ ·å®ƒæ‰å¥½æ›´å…·ä¸€èˆ¬åŒ–çš„è¿›è¡Œå¤„ç†ã€‚</p>

<h2 id="runconfig"><a href="#runconfig" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>RunConfig</h2>

<p>æ­¤å¤„çš„configéœ€è¦ä¼ å…¥<code>tf.estimator.RunConfig</code>,å…¶æºä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code>class RunConfig(object):
  &#34;&#34;&#34;This class specifies the configurations for an `Estimator` run.&#34;&#34;&#34;

  def __init__(self,
               model_dir=None,
               tf_random_seed=None,
               save_summary_steps=100,
               save_checkpoints_steps=_USE_DEFAULT,
               save_checkpoints_secs=_USE_DEFAULT,
               session_config=None,
               keep_checkpoint_max=5,
               keep_checkpoint_every_n_hours=10000,
               log_step_count_steps=100,
               train_distribute=None,
               device_fn=None,
               protocol=None,
               eval_distribute=None,
               experimental_distribute=None,
               experimental_max_worker_delay_secs=None,
               session_creation_timeout_secs=7200):</code></pre>
<ul>
<li>model_dir: æŒ‡å®šå­˜å‚¨æ¨¡å‹å‚æ•°ï¼Œgraphç­‰çš„è·¯å¾„</li>
<li>save_summary_steps: æ¯éš”å¤šå°‘stepå°±å­˜ä¸€æ¬¡Summariesï¼Œä¸çŸ¥é“summaryæ˜¯å•¥</li>
<li>save_checkpoints_steps:æ¯éš”å¤šå°‘ä¸ªstepå°±å­˜ä¸€æ¬¡checkpoint</li>
<li>save_checkpoints_secs: æ¯éš”å¤šå°‘ç§’å°±å­˜ä¸€æ¬¡checkpointï¼Œä¸å¯ä»¥å’Œsave_checkpoints_stepsåŒæ—¶æŒ‡å®šã€‚å¦‚æœäºŒè€…éƒ½ä¸æŒ‡å®šï¼Œåˆ™ä½¿ç”¨é»˜è®¤å€¼ï¼Œå³æ¯600ç§’å­˜ä¸€æ¬¡ã€‚å¦‚æœäºŒè€…éƒ½è®¾ç½®ä¸ºNoneï¼Œåˆ™ä¸å­˜checkpointsã€‚</li>
<li>keep_checkpoint_maxï¼šæŒ‡å®šæœ€å¤šä¿ç•™å¤šå°‘ä¸ªcheckpointsï¼Œä¹Ÿå°±æ˜¯è¯´å½“è¶…å‡ºæŒ‡å®šæ•°é‡åä¼šå°†æ—§çš„checkpointåˆ é™¤ã€‚å½“è®¾ç½®ä¸ºNoneæˆ–0æ—¶ï¼Œåˆ™ä¿ç•™æ‰€æœ‰checkpointsã€‚</li>
<li>keep_checkpoint_every_n_hoursï¼š</li>
<li>log_step_count_steps:è¯¥å‚æ•°çš„ä½œç”¨æ˜¯,(ç›¸å¯¹äºæ€»çš„stepæ•°è€Œè¨€)æŒ‡å®šæ¯éš”å¤šå°‘stepå°±è®°å½•ä¸€æ¬¡è®­ç»ƒè¿‡ç¨‹ä¸­lossçš„å€¼ï¼ŒåŒæ—¶ä¹Ÿä¼šè®°å½•global steps/sï¼Œé€šè¿‡è¿™ä¸ªä¹Ÿå¯ä»¥å¾—åˆ°æ¨¡å‹è®­ç»ƒçš„é€Ÿåº¦å¿«æ…¢ã€‚ï¼ˆå¤©å•¦ï¼Œç»ˆäºæ‰¾åˆ°è¿™ä¸ªå‚æ•°äº†ã€‚ã€‚ã€‚ã€‚ä¹‹å‰ç”¨TPUæµ‹æ¨¡å‹é€Ÿåº¦ï¼Œæ¯æ¬¡éƒ½å¾—ç­‰å¥½ä¹…æ‰è¾“å‡ºä¸€æ¬¡global steps/sçš„æ•°æ®ã€‚ã€‚ã€‚è“ç˜¦é¦™è‡ï¼‰</li>
</ul>

<p>åé¢è¿™äº›å‚æ•°ä¸åˆ†å¸ƒå¼æœ‰å…³ï¼Œä»¥åæœ‰æ—¶é—´å†æ…¢æ…¢äº†è§£ã€‚</p>

<ul>
<li>train_distribute</li>
<li>device_fn</li>
<li>protocol</li>
<li>eval_distribute</li>
<li>experimental_distribute</li>
<li>experimental_max_worker_delay_secs</li>
</ul>

<h2 id="ä»€ä¹ˆæ˜¯tf-estimator-estimatorspec"><a href="#ä»€ä¹ˆæ˜¯tf-estimator-estimatorspec" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>ä»€ä¹ˆæ˜¯tf.estimator.EstimatorSpec</h2>

<h3 id="ä¼ å…¥å‚æ•°"><a href="#ä¼ å…¥å‚æ•°" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>ä¼ å…¥å‚æ•°</h3>

<p>å®ƒæ˜¯ä¸€ä¸ªclass(ç±»)ï¼Œæ˜¯å®šä¹‰åœ¨model_fnä¸­çš„ï¼Œå¹¶ä¸”model_fnè¿”å›çš„ä¹Ÿæ˜¯å®ƒçš„ä¸€ä¸ªå®ä¾‹ï¼Œè¿™ä¸ªå®ä¾‹æ˜¯ç”¨æ¥åˆå§‹åŒ–Estimatorç±»çš„ã€‚å…¶æºä»£ç å¦‚ä¸‹:</p>
<pre><code>class EstimatorSpec():
  def __new__(cls,
              mode,
              predictions=None,
              loss=None,
              train_op=None,
              eval_metric_ops=None,
              export_outputs=None,
              training_chief_hooks=None,
              training_hooks=None,
              scaffold=None,
              evaluation_hooks=None,
              prediction_hooks=None):</code></pre>
<p>é‡è¦å‡½æ•°å‚æ•°:</p>

<ul>
<li>modeï¼šä¸€ä¸ªModeKeys,æŒ‡å®šæ˜¯training(è®­ç»ƒ)ã€evaluation(è®¡ç®—)è¿˜æ˜¯prediction(é¢„æµ‹).</li>
<li>predictionsï¼šPredictions Tensor or dict of Tensor.</li>
<li>lossï¼šTraining loss Tensor. Must be either scalar, or with shape [1].</li>
<li>train_opï¼šé€‚ç”¨äºè®­ç»ƒçš„æ­¥éª¤.</li>
<li>eval_metric_ops: Dict of metric results keyed by name. The values of the dict can be one of the following:</li>
<li>(1) instance of Metric class.</li>
<li>(2) Results of calling a metric function, namely a (metric_tensor, update_op) tuple. metric_tensor should be evaluated without any impact on state (typically is a pure computation results based on variables.). For example, it should not trigger the update_op or requires any input fetching.</li>
</ul>

<h3 id="ä¸åŒæ¨¡å¼éœ€è¦ä¼ å…¥ä¸åŒå‚æ•°"><a href="#ä¸åŒæ¨¡å¼éœ€è¦ä¼ å…¥ä¸åŒå‚æ•°" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>ä¸åŒæ¨¡å¼éœ€è¦ä¼ å…¥ä¸åŒå‚æ•°</h3>

<p>æ ¹æ®modeçš„å€¼çš„ä¸åŒ,éœ€è¦ä¸åŒçš„å‚æ•°,å³ï¼š</p>

<ul>
<li>å¯¹äºmode == ModeKeys.TRAINï¼šå¿…å¡«å­—æ®µæ˜¯losså’Œtrain_op.</li>
<li>å¯¹äºmode == ModeKeys.EVALï¼šå¿…å¡«å­—æ®µæ˜¯loss.</li>
<li>å¯¹äºmode == ModeKeys.PREDICTï¼šå¿…å¡«å­—æ®µæ˜¯predictions.
ä¸Šé¢çš„å‚æ•°è¯´æ˜çœ‹èµ·æ¥è¿˜æ˜¯ä¸€å¤´é›¾æ°´ï¼Œä¸‹é¢ç»™å‡ºä¾‹å­å¸®åŠ©ç†è§£ï¼š</li>
</ul>

<h3 id="æœ€ç®€å•çš„æƒ…å†µ-predict"><a href="#æœ€ç®€å•çš„æƒ…å†µ-predict" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>æœ€ç®€å•çš„æƒ…å†µ: predict</h3>

<p>åªéœ€è¦ä¼ å…¥modeå’Œpredictions</p>
<pre><code># Compute predictions.
predicted_classes = tf.argmax(logits, 1)
if mode == tf.estimator.ModeKeys.PREDICT:
    predictions = {
        &#39;class_ids&#39;: predicted_classes[:, tf.newaxis],
        &#39;probabilities&#39;: tf.nn.softmax(logits),
        &#39;logits&#39;: logits,
    }
    return tf.estimator.EstimatorSpec(mode, predictions=predictions)</code></pre>
<h3 id="è¯„ä¼°æ¨¡å¼-eval"><a href="#è¯„ä¼°æ¨¡å¼-eval" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>è¯„ä¼°æ¨¡å¼ : eval</h3>

<p>éœ€è¦ä¼ å…¥mode,loss,eval_metric_ops</p>

<p>å¦‚æœè°ƒç”¨ Estimator çš„ evaluate æ–¹æ³•ï¼Œåˆ™ model_fn ä¼šæ”¶åˆ° mode = ModeKeys.EVALã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ¨¡å‹å‡½æ•°å¿…é¡»è¿”å›ä¸€ä¸ªåŒ…å«æ¨¡å‹æŸå¤±å’Œä¸€ä¸ªæˆ–å¤šä¸ªæŒ‡æ ‡ï¼ˆå¯é€‰ï¼‰çš„ tf.estimator.EstimatorSpecã€‚</p>

<p>lossç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code># Compute loss.
loss = tf.losses.sparse_softmax_cross_entropy(labels=labels, logits=logits)</code></pre>
<p>TensorFlowæä¾›äº†ä¸€ä¸ªæŒ‡æ ‡æ¨¡å—tf.metricsæ¥è®¡ç®—å¸¸ç”¨çš„æŒ‡æ ‡ï¼Œè¿™é‡Œä»¥accuracyä¸ºä¾‹ï¼š</p>
<pre><code># Compute evaluation metrics.
accuracy = tf.metrics.accuracy(labels=labels,
                               predictions=predicted_classes,
                               name=&#39;acc_op&#39;)</code></pre>
<p>è¿”å›æ–¹å¼å¦‚ä¸‹:</p>
<pre><code>metrics = {&#39;accuracy&#39;: accuracy}

if mode == tf.estimator.ModeKeys.EVAL:
    return tf.estimator.EstimatorSpec(
        mode, loss=loss, eval_metric_ops=metrics)</code></pre>
<h3 id="è®­ç»ƒæ¨¡å¼-train"><a href="#è®­ç»ƒæ¨¡å¼-train" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>è®­ç»ƒæ¨¡å¼:train</h3>

<p>éœ€è¦ä¼ å…¥mode,loss,train_op</p>

<p>lossåŒevalæ¨¡å¼ï¼š</p>
<pre><code># Compute loss.
loss = tf.losses.sparse_softmax_cross_entropy(labels=labels, logits=logits)</code></pre>
<p>train_opç¤ºä¾‹ï¼š</p>
<pre><code>optimizer = tf.train.AdagradOptimizer(learning_rate=0.1)
train_op = optimizer.minimize(loss,global_step=tf.train.get_global_step())</code></pre>
<p>è¿”å›å€¼</p>
<pre><code>return tf.estimator.EstimatorSpec(mode, loss=loss, train_op=train_op)</code></pre>
<h3 id="é€šç”¨æ¨¡å¼"><a href="#é€šç”¨æ¨¡å¼" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>é€šç”¨æ¨¡å¼</h3>

<p>model_fnå¯ä»¥å¡«å……ç‹¬ç«‹äºæ¨¡å¼çš„æ‰€æœ‰å‚æ•°.åœ¨è¿™ç§æƒ…å†µä¸‹,Estimatorå°†å¿½ç•¥æŸäº›å‚æ•°.åœ¨evalå’Œinferæ¨¡å¼ä¸­,train_opå°†è¢«å¿½ç•¥.ä¾‹å­å¦‚ä¸‹ï¼š</p>
<pre><code>def my_model_fn(mode, features, labels):
  predictions = ...
  loss = ...
  train_op = ...
  return tf.estimator.EstimatorSpec(
      mode=mode,
      predictions=predictions,
      loss=loss,
      train_op=train_op)</code></pre></div>

        </article>

        

        


        

        

        
    
    

<div class="post-share">

        

        <div class="share-items">

            
                
                <div class="share-item twitter">
                    
                    <a href="https://twitter.com/share?url=https://chenbokaix250.github.io/tech/tensorflow%E4%B9%8Bestimator/&amp;text=Tensorflow%e4%b9%8b&amp;hashtags=&amp;via=chenbokaiy450" title="åˆ†äº«åˆ°ã€ŒTwitterã€" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon twitter-icon"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg></a>
                </div>
            

            
                
                <div class="share-item facebook">
                    
                    <a href="https://www.facebook.com/sharer/sharer.php?u=https://chenbokaix250.github.io/tech/tensorflow%E4%B9%8Bestimator/&amp;hashtag=%23" title="åˆ†äº«åˆ°ã€ŒFacebookã€" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon facebook-icon"><path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg></a>
                </div>
            

            
                
                <div class="share-item linkedin">
                    
                    <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://chenbokaix250.github.io/tech/tensorflow%E4%B9%8Bestimator/&amp;title=Tensorflow%e4%b9%8b&amp;summary=TensorFlow%e4%b9%8bestimator%e8%af%a6%e8%a7%a3%20Estimator%e5%88%9d%e8%af%86%20%e6%a1%86%e6%9e%b6%e7%bb%93%e6%9e%84%20%e5%9c%a8%e4%bb%8b%e7%bb%8dEs%e2%80%a6%e2%80%a6&amp;source=%e6%9e%81%e4%b9%90%e4%b8%96%e7%95%8c" title="åˆ†äº«åˆ°ã€ŒLinkedInã€" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon linkedin-icon"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg></a>
                </div>
            

            
                
                <div class="share-item telegram">
                    
                    <a href="https://t.me/share/url?url=https://chenbokaix250.github.io/tech/tensorflow%E4%B9%8Bestimator/&amp;text=Tensorflow%e4%b9%8b" title="åˆ†äº«åˆ°ã€ŒTelegramã€" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" class="icon telegram-icon"><path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm121.8 169.9l-40.7 191.8c-3 13.6-11.1 16.9-22.4 10.5l-62-45.7-29.9 28.8c-3.3 3.3-6.1 6.1-12.5 6.1l4.4-63.1 114.9-103.8c5-4.4-1.1-6.9-7.7-2.5l-142 89.4-61.2-19.1c-13.3-4.2-13.6-13.3 2.8-19.7l239.1-92.2c11.1-4 20.8 2.7 17.2 19.5z"/></svg></a>
                </div>
            

            
                
                <div class="share-item weibo">
                    
                    <a href="https://service.weibo.com/share/share.php?&amp;url=https://chenbokaix250.github.io/tech/tensorflow%E4%B9%8Bestimator/&amp;title=Tensorflow%e4%b9%8b&amp;pic=https://pic3.zhimg.com/v2-fcc70547f247f5e3e70b1a5f09bb0612_r.jpg&amp;searchPic=false" title="åˆ†äº«åˆ°ã€Œæ–°æµªå¾®åšã€" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon weibo-icon"><path d="M407 177.6c7.6-24-13.4-46.8-37.4-41.7-22 4.8-28.8-28.1-7.1-32.8 50.1-10.9 92.3 37.1 76.5 84.8-6.8 21.2-38.8 10.8-32-10.3zM214.8 446.7C108.5 446.7 0 395.3 0 310.4c0-44.3 28-95.4 76.3-143.7C176 67 279.5 65.8 249.9 161c-4 13.1 12.3 5.7 12.3 6 79.5-33.6 140.5-16.8 114 51.4-3.7 9.4 1.1 10.9 8.3 13.1 135.7 42.3 34.8 215.2-169.7 215.2zm143.7-146.3c-5.4-55.7-78.5-94-163.4-85.7-84.8 8.6-148.8 60.3-143.4 116s78.5 94 163.4 85.7c84.8-8.6 148.8-60.3 143.4-116zM347.9 35.1c-25.9 5.6-16.8 43.7 8.3 38.3 72.3-15.2 134.8 52.8 111.7 124-7.4 24.2 29.1 37 37.4 12 31.9-99.8-55.1-195.9-157.4-174.3zm-78.5 311c-17.1 38.8-66.8 60-109.1 46.3-40.8-13.1-58-53.4-40.3-89.7 17.7-35.4 63.1-55.4 103.4-45.1 42 10.8 63.1 50.2 46 88.5zm-86.3-30c-12.9-5.4-30 .3-38 12.9-8.3 12.9-4.3 28 8.6 34 13.1 6 30.8.3 39.1-12.9 8-13.1 3.7-28.3-9.7-34zm32.6-13.4c-5.1-1.7-11.4.6-14.3 5.4-2.9 5.1-1.4 10.6 3.7 12.9 5.1 2 11.7-.3 14.6-5.4 2.8-5.2 1.1-10.9-4-12.9z"/></svg></a>
                </div>
            

            
                
                <div class="share-item douban">
                    
                    <a href="https://www.douban.com/share/service?href=https://chenbokaix250.github.io/tech/tensorflow%E4%B9%8Bestimator/&amp;name=Tensorflow%e4%b9%8b&amp;text=TensorFlow%e4%b9%8bestimator%e8%af%a6%e8%a7%a3%20Estimator%e5%88%9d%e8%af%86%20%e6%a1%86%e6%9e%b6%e7%bb%93%e6%9e%84%20%e5%9c%a8%e4%bb%8b%e7%bb%8dEs%e2%80%a6%e2%80%a6" title="åˆ†äº«åˆ°ã€Œè±†ç“£ã€" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="icon douban-icon"><path d="M.643.92v2.412h22.714V.92H.643zm1.974 4.926v9.42h18.764v-9.42H2.617zm2.72 2.408H18.69v4.605H5.338V8.254zm1.657 7.412l-2.512.938c1.037 1.461 1.87 2.825 2.512 4.091H0v2.385h24v-2.385h-6.678c.818-1.176 1.589-2.543 2.303-4.091l-2.73-.938a29.952 29.952 0 01-2.479 5.03h-4.75c-.786-1.962-1.677-3.641-2.672-5.03Z"/></svg></a>
                </div>
            

            
                
                <div class="share-item qq">
                    
                    <a href="https://connect.qq.com/widget/shareqq/index.html?url=https://chenbokaix250.github.io/tech/tensorflow%E4%B9%8Bestimator/&amp;title=Tensorflow%e4%b9%8b&amp;summary=TensorFlow%e4%b9%8bestimator%e8%af%a6%e8%a7%a3%20Estimator%e5%88%9d%e8%af%86%20%e6%a1%86%e6%9e%b6%e7%bb%93%e6%9e%84%20%e5%9c%a8%e4%bb%8b%e7%bb%8dEs%e2%80%a6%e2%80%a6&amp;pics=https://pic3.zhimg.com/v2-fcc70547f247f5e3e70b1a5f09bb0612_r.jpg&amp;site=%e6%9e%81%e4%b9%90%e4%b8%96%e7%95%8c" title="åˆ†äº«åˆ°ã€ŒQQã€" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon qq-icon"><path d="M433.754 420.445c-11.526 1.393-44.86-52.741-44.86-52.741 0 31.345-16.136 72.247-51.051 101.786 16.842 5.192 54.843 19.167 45.803 34.421-7.316 12.343-125.51 7.881-159.632 4.037-34.122 3.844-152.316 8.306-159.632-4.037-9.045-15.25 28.918-29.214 45.783-34.415-34.92-29.539-51.059-70.445-51.059-101.792 0 0-33.334 54.134-44.859 52.741-5.37-.65-12.424-29.644 9.347-99.704 10.261-33.024 21.995-60.478 40.144-105.779C60.683 98.063 108.982.006 224 0c113.737.006 163.156 96.133 160.264 214.963 18.118 45.223 29.912 72.85 40.144 105.778 21.768 70.06 14.716 99.053 9.346 99.704z"/></svg></a>
                </div>
            

            
                
                <div class="share-item qzone">
                    
                    <a href="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://chenbokaix250.github.io/tech/tensorflow%E4%B9%8Bestimator/&amp;title=Tensorflow%e4%b9%8b&amp;summary=TensorFlow%e4%b9%8bestimator%e8%af%a6%e8%a7%a3%20Estimator%e5%88%9d%e8%af%86%20%e6%a1%86%e6%9e%b6%e7%bb%93%e6%9e%84%20%e5%9c%a8%e4%bb%8b%e7%bb%8dEs%e2%80%a6%e2%80%a6&amp;pics=https://pic3.zhimg.com/v2-fcc70547f247f5e3e70b1a5f09bb0612_r.jpg&amp;site=%e6%9e%81%e4%b9%90%e4%b8%96%e7%95%8c" title="åˆ†äº«åˆ°ã€ŒQQ ç©ºé—´ã€" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="icon qzone-icon"><path d="M23.985 9.202c-.032-.099-.127-.223-.334-.258-.207-.036-7.351-1.406-7.351-1.406s-.105-.022-.198-.07c-.092-.047-.127-.167-.127-.167S12.447.956 12.349.77C12.25.583 12.104.532 12 .532c-.104 0-.251.051-.349.238-.098.186-3.626 6.531-3.626 6.531s-.035.12-.128.167c-.092.047-.197.07-.197.07S.556 8.908.348 8.943c-.208.036-.302.16-.333.258a.477.477 0 0 0 .125.449l5.362 5.49s.072.08.119.172c.016.104.005.21.005.21s-1.189 7.242-1.22 7.45.075.369.159.43c.083.062.233.106.421.013.189-.093 6.812-3.261 6.812-3.261s.098-.044.201-.061c.103-.017.201.061.201.061s6.623 3.168 6.812 3.261c.188.094.338.049.421-.013a.463.463 0 0 0 .159-.43c-.021-.14-.93-5.677-.93-5.677.876-.54 1.425-1.039 1.849-1.747-2.594.969-6.006 1.717-9.415 1.866-.915.041-2.41.097-3.473-.015-.678-.071-1.17-.144-1.243-.438-.053-.215.054-.46.545-.831a2640.5 2640.5 0 0 1 2.861-2.155c1.285-.968 3.559-2.47 3.559-2.731 0-.285-2.144-.781-4.037-.781-1.945 0-2.275.132-2.811.168-.488.034-.769.005-.804-.138-.06-.248.183-.389.588-.568.709-.314 1.86-.594 1.984-.626.194-.052 3.082-.805 5.618-.535 1.318.14 3.244.668 3.244 1.276 0 .342-1.721 1.494-3.225 2.597-1.149.843-2.217 1.561-2.217 1.688 0 .342 3.533 1.241 6.689 1.01l.003-.022c.048-.092.119-.172.119-.172l5.362-5.49a.477.477 0 0 0 .127-.449z"/></svg></a>
                </div>
            

            
                
                <div class="share-item qrcode">
                    <div class="qrcode-container" title="é€šè¿‡ã€ŒäºŒç»´ç ã€"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon qrcode-icon"><path d="M0 224h192V32H0v192zM64 96h64v64H64V96zm192-64v192h192V32H256zm128 128h-64V96h64v64zM0 480h192V288H0v192zm64-128h64v64H64v-64zm352-64h32v128h-96v-32h-32v96h-64V288h96v32h64v-32zm0 160h32v32h-32v-32zm-64 0h32v32h-32v-32z"/></svg><div id="qrcode-img"></div>
                    </div>
                    <script src="https://cdn.jsdelivr.net/npm/qrcode-generator@1.4.4/qrcode.min.js"></script>

<script>
    var typeNumber = 0;
    var errorCorrectionLevel = 'L';
    var qr = qrcode(typeNumber, errorCorrectionLevel);
    qr.addData('https:\/\/chenbokaix250.github.io\/tech\/tensorflow%E4%B9%8Bestimator\/');
    qr.make();
    document.getElementById('qrcode-img').innerHTML = qr.createImgTag();
</script>

                </div>
            

        </div>

    </div>




        

        

        
    <footer class="minimal-footer">
        
        
            <div class="post-category">
                <a href="../../tech/" class="post-category-link active">tech</a> | <a href="../../life/" class="post-category-link">life</a>
            </div>
        
        
    </footer>


        

        

        


    </div>
</main>


            
    <div id="back-to-top" class="back-to-top">
        <a href="#"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon"><path d="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"/></svg></a>
    </div>

            
    <footer id="footer" class="footer">
        <div class="footer-inner"><div class="site-info">Â©&nbsp;2020â€“2020&nbsp;<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon footer-icon"><path d="M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"/></svg>&nbsp;chenbokai</div><div class="powered-by">Powered by <a href="https://github.com/gohugoio/hugo" target="_blank" rel="noopener">Hugo</a> | Theme is <a href="https://github.com/reuixiy/hugo-theme-meme" target="_blank" rel="noopener">MemE</a></div><div class="custom-footer"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a></div>

            
        </div>
    </footer>


        </div>
        <script src="../../js/meme.min.e09df94f91ad91e63df74bfcfce0285b72bc0c3f1bf2a6fd5c9e5168d734c987.js" integrity="sha256-4J35T5GtkeY990v8/OAoW3K8DD8b8qb9XJ5RaNc0yYc="></script>


    <script src="https://cdn.jsdelivr.net/gh/cferdinandi/smooth-scroll/dist/smooth-scroll.polyfills.min.js"></script>

<script>
    var scroll = new SmoothScroll('a[href*="#"]', {
        speedAsDuration: true,
        header: '[data-scroll-header]'
    });
</script>












    <script src="https://cdn.jsdelivr.net/npm/medium-zoom@latest/dist/medium-zoom.min.js"></script>

<script>
    mediumZoom(document.querySelectorAll('div.post-body img'), {
        background: 'hsla(var(--color-bg-h), var(--color-bg-s), var(--color-bg-l), 0.95)'
    })
</script>




    <script src="https://cdn.jsdelivr.net/npm/instant.page@3.0.0/instantpage.min.js" type="module" defer></script>





    <div class="app-refresh" id="app-refresh">
        <div class="app-refresh-wrap" onclick="location.reload()">
            <label>å·²æ›´æ–°æœ€æ–°ç‰ˆæœ¬</label>
            <span>ç‚¹å‡»åˆ·æ–°</span>
        </div>
    </div>

    <script>
        if ('serviceWorker' in navigator) {
            if (navigator.serviceWorker.controller) {
                navigator.serviceWorker.addEventListener('controllerchange', function() {
                    showNotification();
                });
            }

            window.addEventListener('load', function() {
                navigator.serviceWorker.register('../../sw.js');
            });
        }

        function showNotification() {
            document.querySelector('meta[name=theme-color]').content = '#000';
            document.getElementById('app-refresh').className += ' app-refresh-show';
        }
    </script>







    </body>
</html>
